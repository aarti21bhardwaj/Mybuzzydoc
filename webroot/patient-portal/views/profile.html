<toaster-container></toaster-container>
<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>My Profile</h2>
    <ol class="breadcrumb">
      <li>
        <a ui-sref="user.dashboard">Home</a>
      </li>
      <li class="active">
        <strong>My Profle</strong>
      </li>
    </ol>
  </div>
  <div class="col-lg-2">

  </div>
</div>

<div class="ibox float-e-margins">

  <div class="ibox-content">
    <form class="form-horizontal well well-lg" name="form" role="form" ng-submit="vm.update()" novalidate>
      <div class="form-group" ng-class="{ 'has-error': (form.name.$dirty && form.name.$invalid ) || (form.name.$touched && form.name.$invalid && form.name.$pristine && form.name.$error.required)}">
        <label for="name" class="col-lg-2 control-label">Name</label>
        <div class="col-lg-6">
          <input placeholder="Enter Name" type="text" name="name" id="name" class="form-control" ng-model="vm.name" ng-required="true"/>
          <span ng-show="(form.name.$dirty && form.name.$invalid ) || (form.name.$touched && form.name.$pristine && form.name.$invalid && form.name.$error.required)" class="help-block">Name is required.</span>
        </div>
      </div>
      <div class="form-group" ng-show="!vm.noEmail" ng-class="{ 'has-error': (form.email.$dirty && form.email.$invalid ) || (form.email.$touched && form.email.$invalid && form.email.$pristine && form.email.$error.required)}">
        <label for="name" class="col-lg-2 control-label">Email</label>
        <div class="col-lg-6">
          <input placeholder="Enter Email" type="email" name="email" id="email" class="form-control" ng-model="vm.email" ng-required="!vm.noEmail"/>
          <span ng-show="form.email.$dirty && form.email.$invalid " class="help-block">Enter valid email.</span>
          <span ng-show="(form.email.$dirty && form.email.$invalid ) || (form.email.$touched && form.email.$pristine && form.email.$invalid && form.email.$error.required)" class="help-block">Email is required.</span>
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error': form.email.$dirty && form.email.$invalid }">
        <div class="col-lg-2">
        </div>
        <div class="col-lg-6">
          <label for="name" class="control-label">User does not have email id</label>
          <input type="checkbox" class="m-l-sm" ng-model="vm.noEmail">
        </div>
      </div>
      <div class="form-group" ng-show="vm.noEmail" ng-class="{ 'has-error': (form.username.$dirty && form.username.$invalid ) || (form.username.$touched && form.username.$invalid && form.username.$pristine && form.username.$error.required)}">
        <label for="name" class="col-lg-2 control-label">UserName</label>
        <div class="col-lg-6">
          <input placeholder="Enter Username" type="text" name="username" id="username" class="form-control" ng-model="vm.username" ng-required="vm.noEmail"/>
          <span ng-show="(form.username.$dirty && form.username.$invalid ) || (form.username.$touched && form.username.$pristine && form.username.$invalid && form.username.$error.required)" class="help-block">Username is required.</span>
        </div>
        <div class="col-lg-4">
          <div class="fb-link-button-container" id="fb-link-button-container">
            <a ng-show = ng-show="!userData.social_profiles.length"  ng-click="vm.linkFb()"  class="btn btn-success btn-social btn-facebook " style="background-color: #3b5998;">
              <span class="fa fa-facebook"></span> Link Facebook Account</a>
            </div>
          </div>
        </div>

        <div class="form-group" ng-show="vm.noEmail" ng-class="{ 'has-error': (form.guardian_email.$dirty && form.guardian_email.$invalid ) || (form.guardian_email.$touched && form.guardian_email.$invalid && form.guardian_email.$pristine && form.guardian_email.$error.required)}">
          <label for="guardian_email" class="col-lg-2 control-label">Guardian's Email</label>
          <div class="col-lg-6">
            <input placeholder="Enter Name" type="text" name="guardian_email" id="guardian_email" class="form-control" ng-model="vm.guardian_email" ng-required="vm.noEmail"/>
            <span ng-show="(form.guardian_email.$dirty && form.guardian_email.$invalid ) || (form.guardian_email.$touched && form.guardian_email.$pristine && form.guardian_email.$invalid && form.guardian_email.$error.required)" class="help-block">Guardian's Email is required.</span>
          </div>
        </div>
        <input type="text" name="fb_identifier" id="fb_id" class="form-control" ng-model="vm.fb_identifier" style="display: none"/>
        <div class="form-group" ng-show="vm.noEmail" ng-class="{ 'has-error': (form.phone.$dirty && form.phone.$invalid ) || (form.phone.$touched && form.phone.$invalid && form.phone.$pristine && form.phone.$error.required)}">
          <label for="name" class="col-lg-2 control-label">Phone</label>
          <div class="col-lg-6">
            <input placeholder="Enter Phone Number: 2125551234" type="tel" name="phone" id="phone" class="form-control" ng-model="vm.phone" data-minlength = "10" ng-required='vm.noEmail'/>
            <span ng-show="form.phone.$error.minlength" class="help-block">Phone is too short.</span>
            <span ng-show="vm.noEmail && (form.reason.$dirty && form.reason.$invalid ) || (form.reason.$touched && form.reason.$pristine && form.reason.$invalid && form.reason.$error.required)" class="help-block">Phone number is required.</span>
            <span ng-show="form.phone.$dirty && form.phone.$invalid" class="help-block">Enter valid phone number.</span>
          </div>
        </div>

        <div class="form-group" >
          <label for="password" class="col-lg-2 control-label">Password</label>
          <div class="col-lg-6">
            <span class="btn btn-primary" ng-click="openChnagePasswordModal()">Change Password</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-lg-6 col-lg-offset-2 text-center">
            <button type="submit" ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-success">Update</button>
          </div>
        </div>
      </form>
</div>
</div>
